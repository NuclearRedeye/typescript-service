sudo: required
language: node_js
node_js:
- lts/*
services:
- docker
install:
- npm install
script:
- npm run lint
- npm run build
- npm run test
deploy:
  skip_cleanup: true
  provider: script
  script: >-
    echo $DOCKER_HUB_USERNAME &&
    echo $DOCKER_HUB_PASSWORD &&
    echo $DOCKER_HUB_PASSWORD | docker login -u $DOCKER_HUB_USERNAME --password-stdin && 
    docker build -t joelsummerfield/experiment.typescript-service . &&
    docker tag joelsummerfield/experiment.typescript-service joelsummerfield/experiment.typescript-service:${TRAVIS_TAG#?} &&
    docker push joelsummerfield/experiment.typescript-service
  on:
    branch: master
    tags: true
env:
  global:
  - secure: l8kJhPRLEcqjFl+1423XoSQ93smErEl2Ho8hAedxzKohRu5gSgfdz63avyzFbWZIgFABl8Y3t2kPwWY1G7QTcVmQfqQuy/Dz8HKg1+CLL4kDb5R2SIhijSLz2QKvMAvXlnsmu0kOI+Oe7//4vhvnGzFoj5PAt1tTSSVbqdrRZKngv2dR9MqgHO+llZOv1cVSJAqfCDmn8aJlsQWPJIvjT2HDDylUtnmrn9Wa6PjzsI0xbHFxzyDEIX1TQ7iW/vAYC+W7pJ/KH2XlyfQYP2ZKsui+Y30lgpQHQgksXX8zjVbvisrcCwRKMOn6z5NH+bCG4dyAwQ3YzsQd7R9vsOSnZh49PEQzrPS9gNC9wuFogn3IFHHhl3QHsrdAArt0VzoXZ0eUS6rmLBb7FONpzclKGRRviN4LVkUZK0jnk2pbr2mONsbzb0VOyxo+zJrgdbeOL6ObXNS+/3VhXRYA8pH/RzCkdfyX/o2hJJIsOg0iPGEueEMpt1K/SxG2Gii8l2IztSiAr5ZhqNXOPRCPX0oBgV3Vmi16o7XPIop2GyinpA9W4Ha+PB2YrwB+TTICnhZPRqLb9LJUDHjHmh2cO/HxSjseWt15B57bkt6sOv2F4TY1b+RQNJaxHZei0y0CoGHsU32BzpLGPj+h/jtNkU9fG3NB/Zp2Ce0jPIh1W/zaWSY=
  - secure: kSUlvVmjd3PdIJ4+Mnko6MmzAXuRsWLXjuTgZ9XKa/hT3lmhL+gMeGzA/MkJQ0Mo10+GXEwPqFYd9sTOyUOS0vq4FdKi7OHuRJeNOJYc6/sOtyOOwcUS8NE5dv9MYKoUs1gcfxt+ij6OpV0h/JE0RftbE218eWg2woSO2M3VkO27atqFS//ux7kOQxNkRKzG+s6sH2NTS1WYsFgSmAZv9vQqfAD/NM+Y9c22At4Z5j1NstSKkraDVw2S3plrzwXZUBCAEOTwnytDEXOuB4PQXg5UaejNDRqU+oADIyfEz+rHTzONr13XsG00mUjf12cqWqv8ubBZUJBHgRGBktV+yzz6aawzNQ6+XQGEP6gtYuKla+/3I/AQgo6aLNxOXqUJdDMULloH5zI+VYYmXVK3FM128DJTtJ44Lc1pbWMhDNxI0pLtEdQNuL8FfnuwRdB87ZN83dtk7atwSrrRqAksLNMMLnU0+NMs75nNeFIFzWYtDFAbOP+/Kil0g76XUwFWCAuYyPDhIw0JKUPM2BVAocLQMUiRSTgSvXR2rcghxSmyLEgGA4dBqMzpKlLi0eYDytSA/fgBTbFBFriv5RTZ7wAycWU86BOchJhKMK+xqTdkhwQXcyjHTiwz8jK9bQLFfYK0LlDeQKlw4+TEbYIJWFRo3JzEI4eyR5SuBieaN8c=
